/* esm.sh - @preact/signals@2.5.1 */
import{Component as q,options as l,isValidElement as x,Fragment as F}from"preact";import{useMemo as w,useState as R,useRef as $,useEffect as V}from"preact/hooks";import{effect as p,Signal as g,computed as S,signal as T,batch as b}from"@preact/signals-core";import{Signal as X,batch as Y,computed as Z,effect as tt,signal as it,untracked as et}from"@preact/signals-core";var A,m,y,h=typeof window<"u"&&!!window.__PREACT_SIGNALS_DEVTOOLS__,E=[],C=[];p(function(){A=this.N})();function c(i,t){l[i]=t.bind(null,l[i]||function(){})}function d(i){y&&y(),y=i&&i.S()}function N(i){var t=this,n=i.data,e=P(n);e.value=n;var u=w(function(){for(var f=t,a=t.__v;a=a.__;)if(a.__c){a.__c.__$f|=4;break}var _=S(function(){var v=e.value.value;return v===0?0:v===!0?"":v||""}),s=S(function(){return!Array.isArray(_.value)&&!x(_.value)}),L=p(function(){if(this.N=O,s.value){var v=_.value;f.__v&&f.__v.__e&&f.__v.__e.nodeType===3&&(f.__v.__e.data=v)}}),k=t.__$u.d;return t.__$u.d=function(){L(),k.call(this)},[s,_]},[]),r=u[0],o=u[1];return r.value?o.peek():o.value}N.displayName="ReactiveTextNode";Object.defineProperties(g.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:N},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});c("__b",function(i,t){if(h&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof t.type=="string"){var n,e=t.props;for(var u in e)if(u!=="children"){var r=e[u];r instanceof g&&(n||(t.__np=n={}),n[u]=r,e[u]=r.peek())}}i(t)});c("__r",function(i,t){if(h&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(t),t.type!==F){d();var n,e=t.__c;e&&(e.__$f&=-2,(n=e.__$u)===void 0&&(e.__$u=n=(function(u){var r;return p(function(){r=this}),r.c=function(){e.__$f|=1,e.setState({})},r})())),m=e,d(n)}i(t)});c("__e",function(i,t,n,e){h&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),d(),m=void 0,i(t,n,e)});c("diffed",function(i,t){h&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),d(),m=void 0;var n;if(typeof t.type=="string"&&(n=t.__e)){var e=t.__np,u=t.props;if(e){var r=n.U;if(r)for(var o in r){var f=r[o];f!==void 0&&!(o in e)&&(f.d(),r[o]=void 0)}else r={},n.U=r;for(var a in e){var _=r[a],s=e[a];_===void 0?(_=G(n,a,s,u),r[a]=_):_.o(s,u)}}}i(t)});function G(i,t,n,e){var u=t in i&&i.ownerSVGElement===void 0,r=T(n);return{o:function(o,f){r.value=o,e=f},d:p(function(){this.N=O;var o=r.value.value;e[t]!==o&&(e[t]=o,u?i[t]=o:o!=null&&(o!==!1||t[4]==="-")?i.setAttribute(t,o):i.removeAttribute(t))})}}c("unmount",function(i,t){if(typeof t.type=="string"){var n=t.__e;if(n){var e=n.U;if(e){n.U=void 0;for(var u in e){var r=e[u];r&&r.d()}}}}else{var o=t.__c;if(o){var f=o.__$u;f&&(o.__$u=void 0,f.d())}}i(t)});c("__h",function(i,t,n,e){(e<3||e===9)&&(t.__$f|=2),i(t,n,e)});q.prototype.shouldComponentUpdate=function(i,t){var n=this.__$u,e=n&&n.s!==void 0;for(var u in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var r=2&this.__$f;if(!(e||r||4&this.__$f)||1&this.__$f)return!0}else if(!(e||4&this.__$f)||3&this.__$f)return!0;for(var o in i)if(o!=="__source"&&i[o]!==this.props[o])return!0;for(var f in this.props)if(!(f in i))return!0;return!1};function P(i,t){return R(function(){return T(i,t)})[0]}function J(i,t){var n=$(i);return n.current=i,m.__$f|=4,w(function(){return S(function(){return n.current()},t)},[])}var D=typeof requestAnimationFrame>"u"?setTimeout:function(i){var t=function(){clearTimeout(n),cancelAnimationFrame(e),i()},n=setTimeout(t,35),e=requestAnimationFrame(t)},I=function(i){queueMicrotask(function(){queueMicrotask(i)})};function U(){b(function(){for(var i;i=E.shift();)A.call(i)})}function M(){E.push(this)===1&&(l.requestAnimationFrame||D)(U)}function j(){b(function(){for(var i;i=C.shift();)A.call(i)})}function O(){C.push(this)===1&&(l.requestAnimationFrame||I)(j)}function K(i,t){var n=$(i);n.current=i,V(function(){return p(function(){return this.N=M,n.current()},t)},[])}export{X as Signal,Y as batch,Z as computed,tt as effect,it as signal,et as untracked,J as useComputed,P as useSignal,K as useSignalEffect};
//# sourceMappingURL=https://esm.sh/@preact/signals@2.5.1/X-ZXByZWFjdA/es2022/signals.mjs.map