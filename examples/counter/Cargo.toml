[workspace]
resolver = "3"
members  = [".", "components"]

[workspace.dependencies]
uibeam = { path = "../../uibeam", features = ["laser"] }
serde  = { version = "1", features = ["derive"] }

[workspace.metadata.tasks]
build = """
    cd components
    if [ -d .uibeam ]; then
        rm -rf .uibeam/**.*
    fi
    wasm-pack build --target web --out-dir .uibeam --out-name lasers
    cd ..
    cargo build
"""
run = """
    cargo task build
    cargo run
"""

[package]
name    = "counter"
version = "0.0.0"
edition = "2024"

[dependencies]
components = { path = "components" }
uibeam = { workspace = true }
serde  = { workspace = true }
ohkami = { git = "https://github.com/ohkami-rs/ohkami", branch = "v0.24", features = ["rt_smol"] }
smol   = { version = "2" }
